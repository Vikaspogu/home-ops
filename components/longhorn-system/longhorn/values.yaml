# Optimized for 1-2 node cluster
longhorn:
  # CSI controller replicas - keep at 1 for small clusters
  replicas: 1

csi:
  attacher:
    replicas: 1
    tag: v4.9.0-20250709
  provisioner:
    replicas: 1
    tag: v5.3.0-20250709
  nodeDriverRegistrar:
    tag: v2.14.0-20250709
  resizer:
    replicas: 1
    tag: v1.14.0-20250709
  snapshotter:
    replicas: 1
    tag: v8.3.0-20250709
  attacherReplicaCount: 2
  provisionerReplicaCount: 2
  resizerReplicaCount: 2
  snapshotterReplicaCount: 2

defaultSettings:
  defaultDataPath: "/srv/dev-disk-by-uuid-fa718509-497e-4bd6-844a-13fffd38aa6a/longhorn"
  defaultDataLocality: "best-effort"
  defaultClassReplicaCount: 1
  mkfsExt4Parameters: "-F"
  guaranteedInstanceManagerCPU: "5"
  taintToleration: "node-role.kubernetes.io/control-plane:NoSchedule"

preUpgradeChecker:
  jobEnabled: false

persistence:
  defaultClass: false
  defaultClassReplicaCount: 2
  defaultFsType: ext4
  reclaimPolicy: Delete
  defaultMkfsParams: "-F"

# Resource limits for small clusters
longhornManager:
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

longhornDriver:
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
longhornUI:
  replicas: 1
annotations:
  configmap.reloader.stakater.com/reload: longhorn-default-setting
ingress:
  enabled: false
