---
# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/external-secrets.io/externalsecret_v1beta1.json
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: openclaw
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword-connect
  target:
    name: openclaw-secret
    template:
      engineVersion: v2
      data:
        # Environment variables for skills
        GITHUB_TOKEN: "{{ .GITHUB_TOKEN }}"
        # GOOGLE_CLIENT_ID: "{{ .GOOGLE_CLIENT_ID }}"
        # GOOGLE_CLIENT_SECRET: "{{ .GOOGLE_CLIENT_SECRET }}"
  dataFrom:
    - extract:
        key: openclaw
---
# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/external-secrets.io/externalsecret_v1beta1.json
apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: openclaw-config-json
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword-connect
  target:
    name: openclaw-config-json
    template:
      engineVersion: v2
      data:
        # OpenClaw config.json - mounted as file
        config.json: |
          {
            "providers": {
              "ollama": {
                "baseUrl": "http://{{ .OLLAMA_URL }}:11434",
                "model": "qwen2.5-coder:7b",
                "enabled": true
              }
            },
            "defaultProvider": "ollama",
            "gateway": {
              "port": 18789,
              "host": "0.0.0.0"
            },
            "memory": {
              "enabled": true
            },
            "heartbeat": {
              "enabled": false
            }
          }
  dataFrom:
    - extract:
        key: openclaw
