---
controllers:
  app:
    pod:
      annotations:
        reloader.stakater.com/auto: "true"
      securityContext:
        runAsUser: 1000
        runAsGroup: 1000
        runAsNonRoot: true
        fsGroup: 1000
        fsGroupChangePolicy: OnRootMismatch
    containers:
      app:
        image:
          repository: ghcr.io/kareadita/kavita
          tag: 0.8.8@sha256:22c42f3cc83fb98b98a6d6336200b615faf2cfd2db22dab363136744efda1bb0
        securityContext:
          allowPrivilegeEscalation: false
          readOnlyRootFilesystem: true
          capabilities: { drop: ["ALL"] }
        resources:
          requests:
            cpu: 15m
            memory: 800Mi
          limits:
            memory: 2Gi
        probes:
          liveness:
            enabled: true
          readiness:
            enabled: true
          startup:
            enabled: true

service:
  app:
    ports:
      http:
        port: &port 5000

persistence:
  data:
    existingClaim: kavita
    advancedMounts:
      app:
        app:
          - path: /kavita/config
  media:
    enabled: true
    globalMounts:
      - path: /media
    type: nfs
    server: synology.a113.internal
    path: "/volume1/media/Ebooks"
