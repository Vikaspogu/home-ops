---
controllers:
  app:
    pod:
      securityContext:
        runAsUser: 1000
        runAsGroup: 1000
        fsGroup: 1000
        fsGroupChangePolicy: "OnRootMismatch"
        supplementalGroups:
          - 100
    containers:
      app:
        image:
          repository: ghcr.io/home-operations/radarr
          tag: 6.0.1.10258@sha256:b67ac38b70e9f0d2aee0be31be27fd25d9d35ed1f7204d012fd05effabc395f5
        env:
          TZ: "America/New_York"
          RADARR__INSTANCE_NAME: Radarr
          RADARR__PORT: &port 80
          RADARR__LOG_LEVEL: info
        resources:
          limits:
            memory: 1500Mi
          requests:
            cpu: 250m
            memory: 350Mi
        probes:
          liveness: &probes
            enabled: true
            custom: true
            spec:
              httpGet:
                path: /ping
                port: *port
              initialDelaySeconds: 0
              periodSeconds: 10
              timeoutSeconds: 1
              failureThreshold: 3
          readiness: *probes
service:
  app:
    ports:
      http:
        port: 80

ingress:
  app:
    enabled: true
    className: internal
    annotations:
      gethomepage.dev/enabled: "true"
      gethomepage.dev/group: Ingress
      gethomepage.dev/icon: radarr.png
    hosts:
      - host: "radarr.${CLUSTER_DOMAIN}"
        paths:
          - path: /
            pathType: Prefix
            service:
              identifier: app
              port: http
    tls:
      - hosts:
          - "radarr.${CLUSTER_DOMAIN}"

persistence:
  config:
    enabled: true
    existingClaim: radarr
  media:
    type: nfs
    server: omv-loki.vikaspogu.internal
    path: "/storage0/media"
    globalMounts:
      - path: /nfs-nas-pvc
