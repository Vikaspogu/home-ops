---
controllers:
  app:
    annotations:
      reloader.stakater.com/auto: "true"
    initContainers:
      volume-permissions:
        image:
          repository: dpage/pgadmin4
          tag: "9.9@sha256:5d9624a93634d1c5e595619cc57b1d330758120d1baf445fa97300c0c1fc3c0a"
        command: ["/bin/chown", "-R", "5050:5050", "/var/lib/pgadmin"]
        securityContext:
          runAsUser: 0
    containers:
      app:
        image:
          repository: dpage/pgadmin4
          tag: "9.9@sha256:5d9624a93634d1c5e595619cc57b1d330758120d1baf445fa97300c0c1fc3c0a"
        env:
          PGADMIN_CONFIG_ENHANCED_COOKIE_PROTECTION: "False"
        envFrom:
          - secretRef:
              name: pgadmin-secret
        resources:
          requests:
            cpu: 50m
            memory: 100Mi
          limits:
            memory: 500Mi
service:
  app:
    ports:
      http:
        port: 80
persistence:
  config:
    enabled: true
    existingClaim: pgadmin
    globalMounts:
      - path: /var/lib/pgadmin
  oauthconfig:
    type: secret
    name: pgadmin-oauth-secret
    globalMounts:
      - path: /pgadmin4/config_local.py
        subPath: config_local.py
