default:
  app:
    enabled: true
    enableAutoSync: true
    autoSyncPrune: true
    project: default
    labels:
      app-source: cluster01
      repo: default
    destination:
      server: https://kubernetes.default.svc
    source:
      repoURL: https://github.com/Vikaspogu/home-ops.git
      targetRevision: HEAD
    syncPolicy:
      automated:
        allowEmpty: true
        prune: true
        selfHeal: true
      retry:
        limit: 1
        backoff:
          duration: 10s
          factor: 2
          maxDuration: 3m
      syncOptions:
        - ApplyOutOfSyncOnly=true
        - PrunePropagationPolicy=foreground
        - PruneLast=true
        - ServerSideApply=true
        - FailOnSharedResource=true
        - RespectIgnoreDifferences=true
        - CreateNamespace=false


applications:
  external-secrets-chart:
    annotations:
      argocd.argoproj.io/sync-wave: "0"
    destination:
      namespace: external-secrets
    source:
      path: components/external-secrets/external-secrets-chart

  cilium:
    annotations:
      argocd.argoproj.io/sync-wave: "0"
    destination:
      namespace: kube-system
    source:
      path: clusters/cluster01/apps/kube-system/cilium

  external-secrets-stores:
    annotations:
      argocd.argoproj.io/sync-wave: "5"
    destination:
      namespace: external-secrets
    source:
      path: components/external-secrets/external-secrets-stores

  onepassword-connect:
    annotations:
      argocd.argoproj.io/sync-wave: "10"
    destination:
      namespace: external-secrets
    source:
      path: components/external-secrets/onepassword-connect

  cert-manager:
    annotations:
      argocd.argoproj.io/sync-wave: "15"
    destination:
      namespace: cert-manager
    source:
      path: components/cert-manager/cert-manager

  unifi-dns:
    annotations:
      argocd.argoproj.io/sync-wave: "15"
    destination:
      namespace: network
    source:
      path: components/network/unifi-dns

  argo-cd:
    annotations:
      argocd.argoproj.io/sync-wave: "20"
    destination:
      namespace: argo-system
    source:
      path: clusters/cluster01/apps/argo-system/argo-cd

  root-application:
    annotations:
      argocd.argoproj.io/sync-wave: "20"
    destination:
      namespace: argo-system
    source:
      path: clusters/cluster01/apps/argo-system/root-application
